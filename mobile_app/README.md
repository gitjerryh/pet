# 机械狗控制移动应用

这是一个基于Flutter开发的机械狗控制应用，适用于ESP32控制的机械狗。应用提供了直观的界面来控制机械狗的移动和功能，同时集成了树莓派视频流。

## 功能特点

- **虚拟轮盘控制**: 使用轮盘控制机械狗的前进、后退、左转、右转
- **功能按钮**: 快速访问预设动作（握手、跳跃等）
- **视频集成**: 实时查看树莓派摄像头视频流
- **全屏横屏模式**: 优化的移动设备操作体验
- **设置界面**: 自定义ESP32和树莓派的IP地址和端口

## 使用前提

此应用需要配合以下硬件使用：
1. 基于ESP32的机械狗
2. 带摄像头的树莓派（用于视频流）

## 安装方法

### 开发环境构建
```bash
# 克隆仓库
git clone <repository-url>

# 进入项目目录
cd mobile_app

# 安装依赖
flutter pub get

# 运行应用
flutter run
```

### 直接安装
从Release页面下载最新的APK文件并安装到Android设备上。

## 使用说明

1. **首次启动**:
   - 打开应用后，进入设置界面设置ESP32的IP地址和树莓派的IP地址及端口
   - 保存设置后返回主界面

2. **视频流**:
   - 点击"启动视频"按钮开始视频流
   - 如果视频流出现问题，可以点击"刷新视频"按钮

3. **机械狗控制**:
   - 使用左侧的虚拟轮盘控制机械狗移动
   - 将轮盘向上拉动机械狗前进，向下拉动后退
   - 将轮盘向左拉动左转，向右拉动右转

4. **特殊功能**:
   - 右侧按钮区域提供了多种预设功能
   - 点击对应按钮执行特定动作（如握手、跳跃等）
   - 使用灯光和蜂鸣器控制按钮控制这些附加功能

## 故障排除

- **连接问题**: 确保ESP32和树莓派的IP地址设置正确，并且与手机在同一网络下
- **视频流不显示**: 检查树莓派摄像头服务是否正常运行，端口是否正确
- **控制命令无响应**: 检查ESP32的连接状态，可能需要重启机械狗

## 开发原理

本应用通过HTTP GET请求与ESP32通信，发送控制命令。视频流通过WebView集成，从树莓派摄像头服务获取。

控制命令格式：
```
http://<esp-ip>/control?var=<variable>&val=<value>&cmd=0
```

## 许可证

[MIT License](LICENSE) 